!function(){try{var e="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{},n=Error().stack;n&&(e._sentryDebugIds=e._sentryDebugIds||{},e._sentryDebugIds[n]="483fa970-67a1-449f-848a-0155b8d1ac7b",e._sentryDebugIdIdentifier="sentry-dbid-483fa970-67a1-449f-848a-0155b8d1ac7b")}catch(e){}}(),(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[705],{30520:function(e,n,t){"use strict";t.d(n,{Pg:function(){return a},ad:function(){return i}});var r=t(53644),o=t(95586);r.z.object({id:r.z.string(),dataUri:r.z.string()});let a=r.z.object({id:r.z.string(),mediaType:r.z.string()}),i=()=>(0,o.Z)()},91341:function(e,n,t){"use strict";function r(e){return e.replace(/.*?:\/\//g,"").replace(/#.*/g,"").replace(/\?.*/g,"")}t.d(n,{v:function(){return r}})},77377:function(e,n,t){"use strict";t.d(n,{KI:function(){return c},D2:function(){return s},l9:function(){return l}});var r=t(27950),o=t(91341),a=t(50366);let i=e=>{let n="",t="",r="",o=!1,i=!1,s=new a._b({onopentagname(e){r=e},onattribute(e,n){"base"===r&&"href"===e&&(t=n)},ontext(e){"title"===r&&(n+=e)},onclosetag(e){"title"===e&&(o=!0),"base"===e&&(i=!0)}});for(let n=0;n<e.length&&(!o||!i);n+=100){let t=e.slice(n,n+100);s.write(t)}return s.end(),{title:n.trim(),baseHref:t}},s=e=>{let n,t;let{messages:a,debug:s}=e,c=[],d="",u="GET",p=[];for(let e of a){if(s&&p.push(e),"user"===e.role){let o=(0,r.Kk)(e.content);if(!o)continue;o&&("GET"===o.type||"POST"===o.type)&&"string"==typeof o.target?(t=void 0,d=o.target,u=o.type,n=o.body):"eval"===o.type&&(u="eval",t=o.code)}if("assistant"===e.role){let{title:r,baseHref:a}=i(e.content),m={id:e.id,url:l(a)||d,title:r||(0,o.v)(d),method:u,body:n,command:t};s&&(m.debug={messages:p},p=[]),c.push(m)}}return c};function l(e){try{return decodeURI(e)}catch(n){return e}}function c(e){let{id:n,prompt:t,content:r}=e;return s({messages:[{id:"".concat(n,"-user"),role:"user",content:t},{id:n,role:"assistant",content:r}],debug:!0})[0]}},14581:function(e,n,t){"use strict";t.d(n,{Cs:function(){return l},cR:function(){return c},ee:function(){return s},wn:function(){return d}});var r=t(53644),o=t(30520),a=t(54383);let i=r.z.object({id:r.z.string(),pinned:r.z.boolean()}),s=r.z.object({version:r.z.literal(1),attachments:r.z.array(o.Pg),siteContext:r.z.array(i).optional()});function l(){return{version:1,attachments:[]}}function c(e,n,t){let r=l();if(r.attachments=n.attachments,(0,a.Z)(n.siteContext,"Parent lore has no site context"),r.siteContext=[...n.siteContext,{id:e,pinned:!1}],!t.allowInfiniteContext){let e=r.siteContext.filter(e=>e.pinned).slice(-d),n=d-e.length,t=n>0?r.siteContext.filter(e=>!e.pinned).slice(-n):[],o=new Set([...e.map(e=>e.id),...t.map(e=>e.id)]);r.siteContext=r.siteContext.filter(e=>o.has(e.id))}return r}let d=4},88202:function(e,n,t){"use strict";t.d(n,{ip:function(){return a},j:function(){return o}});var r=t(1529);let o="invalid-profile-page",a={getMessages:()=>[{role:"user",content:'<action>\n{\n  "type": "GET",\n  "target": "'.concat("https://websim.ai/",'"\n}\n</action>'),id:"E3A7GUp"},{id:o,content:r.cv,role:"assistant"}]}},92268:function(e,n,t){"use strict";t.d(n,{BM:function(){return a},XN:function(){return o},vj:function(){return i}});var r=t(1529);let o="PzOD6Z9",a="https://websim.ai/",i={getMessages:()=>[{role:"user",content:'<action>\n{\n  "type": "GET",\n  "target": "'.concat(a,'"\n}\n</action>'),id:"E3A7GUp"},{id:o,content:r.W_,role:"assistant"}]}},46587:function(e,n,t){"use strict";t.d(n,{ZZ:function(){return a},_w:function(){return o}});var r=t(1529);let o="LOGGED_IN",a={getMessages:()=>[{role:"user",content:'<action>\n{\n  "type": "GET",\n  "target": "'.concat("https://websim.ai",'"\n}\n</action>'),id:"E3A7GUp"},{id:o,content:r.IF,role:"assistant"}]}},75380:function(e,n,t){"use strict";t.d(n,{kM:function(){return l},vg:function(){return s}});var r=t(92268),o=t(46587),a=t(88202);let i={[o._w]:o.ZZ,[r.XN]:r.vj,[a.j]:a.ip},s=Object.fromEntries(Object.entries(i).map(e=>{let[n,t]=e;return[n,t.getMessages()]}));function l(e){return e in i}},27950:function(e,n,t){"use strict";t.d(n,{Kk:function(){return a},QE:function(){return d},RH:function(){return c},ZD:function(){return s},tk:function(){return l}});var r=t(53644);let o=r.z.discriminatedUnion("type",[r.z.object({type:r.z.literal("text"),text:r.z.string()}),r.z.object({type:r.z.literal("image"),source:r.z.object({type:r.z.literal("base64"),media_type:r.z.string(),data:r.z.string()})})]);function a(e){if(!e.startsWith("<action>"))return;let n=e.slice(8,-9);try{return JSON.parse(n)}catch(e){return}}function i(e){return"<action>\n".concat(JSON.stringify(e,null,2),"\n</action>")}function s(e){return i({type:"GET",target:e})}function l(e,n){return i({type:"POST",target:e,body:n})}function c(e){return i({type:"eval",code:e})}function d(e){let n=a(e);return n?"GET"===n.type||"POST"===n.type?n.target:"eval"===n.type?n.code:null:null}r.z.object({id:r.z.string(),role:r.z.enum(["user","assistant","system","function","data","tool"]),content:r.z.union([r.z.string(),r.z.array(o)])}),r.z.object({id:r.z.string(),role:r.z.enum(["user","assistant","system","function","data","tool"]),content:r.z.string(),prefillNextWith:r.z.string().optional()}),r.z.object({role:r.z.enum(["user","assistant","system","function","data","tool"]),content:r.z.string()}).strict()},1529:function(e,n,t){"use strict";t.d(n,{IF:function(){return d},W_:function(){return c},cv:function(){return l}});var r={};r.d=(e,n)=>{for(var t in n)r.o(n,t)&&!r.o(e,t)&&Object.defineProperty(e,t,{enumerable:!0,get:n[t]})},r.o=(e,n)=>Object.prototype.hasOwnProperty.call(e,n);var o={};r.d(o,{INVALID_PROFILE_HTML:()=>i,LANDING_HTML:()=>s,LOGGED_IN_HTML:()=>a});let a='<html>\n  <head>\n    <base href="https://websim.ai" />\n    <title>websim.ai</title>\n    <script>\n      if (\n        document.cookie\n          .split("; ")\n          .find((row) => row.startsWith("nosleep="))\n          ?.split("=")[1] === "true"\n      ) {\n        document.documentElement.classList.add("dark");\n      }\n    </script>\n    <script src="https://unpkg.com/vue@3/dist/vue.global.js"></script>\n    <style>\n      *,\n      *::before,\n      *::after {\n        box-sizing: border-box;\n      }\n      a {\n        color: inherit;\n        text-decoration: none;\n      }\n      body {\n        margin: 0;\n        font-family: -apple-system, BlinkMacSystemFont, avenir next, avenir,\n          segoe ui, helvetica neue, helvetica, Cantarell, Ubuntu, roboto, noto,\n          arial, sans-serif;\n      }\n      body::-webkit-scrollbar {\n        display: none;\n      }\n      .dark body {\n        color: #f3f4f6;\n        background: #171717;\n      }\n      .logo {\n        font-family: "Comic Sans MS", cursive;\n        text-shadow: 2px 2px 4px rgba(0, 0, 0, 0.5);\n        letter-spacing: 0.1em;\n        font-weight: bold;\n      }\n      .logo span {\n        display: inline-block;\n      }\n      .logo span:nth-child(1) {\n        color: #4285f4;\n        transform: rotate(-10deg);\n      }\n      .logo span:nth-child(2) {\n        color: #ea4335;\n        transform: rotate(5deg) translateY(-0.2rem);\n      }\n      .logo span:nth-child(3) {\n        color: #fbbc05;\n        transform: rotate(-5deg) translateY(0.1rem);\n      }\n      .logo span:nth-child(4) {\n        color: #4285f4;\n        transform: rotate(10deg) translateY(-0.2rem);\n      }\n      .logo span:nth-child(5) {\n        color: #34a853;\n        transform: rotate(-10deg) translateY(0.2rem);\n      }\n      .logo span:nth-child(6) {\n        color: #ea4335;\n        transform: rotate(5deg) translateY(-0.2rem);\n      }\n      .dark .logo span:nth-child(1) {\n        color: rgb(254, 240, 138);\n      }\n      .dark .logo span:nth-child(2) {\n        color: rgb(153, 246, 228);\n      }\n      .dark .logo span:nth-child(3) {\n        color: rgb(56, 189, 248);\n      }\n      .dark .logo span:nth-child(4) {\n        color: rgb(254, 240, 138);\n      }\n      .dark .logo span:nth-child(5) {\n        color: rgb(249, 168, 212);\n      }\n      .dark .logo span:nth-child(6) {\n        color: rgb(153, 246, 228);\n      }\n      .login {\n        display: block;\n        padding: 4px 8px;\n        border-radius: 5px;\n        font-size: 0.875rem;\n        background-color: #e5e7eb;\n        color: #374151;\n      }\n      .app {\n        display: flex;\n        flex-direction: column;\n        justify-content: flex-start;\n        min-height: 100vh;\n      }\n      .bookmarks-bar {\n        display: flex;\n        justify-content: space-between;\n        align-items: center;\n        flex-wrap: wrap;\n        gap: 1rem;\n        padding: 0.5rem;\n      }\n      .social-links {\n        display: flex;\n        flex-wrap: wrap;\n        gap: 1rem;\n      }\n      .social-link:any-link {\n        display: flex;\n        align-items: center;\n        column-gap: 0.25rem;\n        color: inherit;\n        text-decoration: none;\n      }\n      .social-link:hover {\n        color: #4d90fe;\n      }\n      .social-icon {\n        width: 1rem;\n        height: 1rem;\n      }\n      .footer-logo {\n        position: fixed;\n        bottom: 1rem;\n        right: 1rem;\n        z-index: 10;\n        font-size: 1.5rem;\n      }\n      .container {\n        max-width: 1280px;\n        width: 100%;\n        margin: 0 auto;\n        padding: 0.5rem;\n      }\n      .section {\n        border-radius: 0.375rem;\n        margin: 1rem 0;\n      }\n      .section-header {\n        display: flex;\n        flex-wrap: wrap;\n        align-items: center;\n        gap: 0.5rem;\n      }\n      .section-title {\n        flex: 1;\n        white-space: nowrap;\n        font-size: 1.25rem;\n        font-weight: 600;\n        color: #171717;\n        margin-top: 0.5rem;\n        margin-bottom: 1rem;\n      }\n      .dark .section-title {\n        color: #f3f4f6;\n      }\n      .grid-container {\n        display: grid;\n        grid-template-columns: repeat(1, minmax(0, 1fr));\n        gap: 1rem;\n      }\n      @media (min-width: 640px) {\n        .grid-container {\n          grid-template-columns: repeat(2, minmax(0, 1fr));\n        }\n      }\n      @media (min-width: 768px) {\n        .grid-container {\n          grid-template-columns: repeat(3, minmax(0, 1fr));\n        }\n      }\n      @media (min-width: 1024px) {\n        .grid-container {\n          grid-template-columns: repeat(4, minmax(0, 1fr));\n        }\n      }\n      .loading-text {\n        color: #6b7280;\n        margin-top: 0.5rem;\n      }\n      .pill-buttons {\n        display: flex;\n        column-gap: 0.5rem;\n        margin-left: 0.5rem;\n      }\n      .pill-button {\n        appearance: none;\n        border: none;\n        padding: 0.5rem 0.75rem;\n        border-radius: 9999px;\n        font-size: 0.875rem;\n        cursor: pointer;\n      }\n      .pill-button.active {\n        background-color: #4d90fe;\n        color: white;\n      }\n      .pill-button.inactive {\n        background-color: #e5e7eb;\n        color: #374151;\n      }\n      .pill-button-group {\n        display: flex;\n      }\n      .pill-button-group .pill-button:not(:last-child) {\n        border-top-right-radius: 0;\n        border-bottom-right-radius: 0;\n      }\n      .pill-button-group .pill-button:not(:first-child) {\n        border-top-left-radius: 0;\n        border-bottom-left-radius: 0;\n      }\n      .feed-item {\n        display: flex;\n        flex-direction: column;\n        background-color: #f3f4f6;\n        border-radius: 0.375rem;\n        width: 100%;\n        border: 1px solid #d1d5db;\n        transition: background-color 0.2s, border-color 0.2s;\n      }\n      .feed-item:hover {\n        background-color: #e5e7eb;\n        border-color: #6b7280;\n      }\n      .feed-image {\n        display: flex;\n        width: 100%;\n      }\n      .feed-image img {\n        display: block;\n        width: 100%;\n        height: auto;\n        border-top-left-radius: 0.375rem;\n        border-top-right-radius: 0.375rem;\n      }\n      .feed-content {\n        padding: 0.5rem;\n        text-align: left;\n        overflow: hidden;\n        width: 100%;\n        box-sizing: border-box;\n        display: flex;\n        flex-direction: column;\n      }\n      .feed-title {\n        font-size: 1.125rem;\n        font-weight: 500;\n        color: #1f2937;\n        white-space: nowrap;\n        text-overflow: ellipsis;\n        overflow: hidden;\n        margin-bottom: 0.25rem;\n      }\n      .feed-url {\n        white-space: nowrap;\n        overflow: hidden;\n        text-overflow: ellipsis;\n        max-width: 100%;\n        color: #2563eb;\n        text-decoration: none;\n      }\n      .feed-url:hover {\n        text-decoration: underline;\n      }\n      .feed-footer {\n        display: flex;\n        align-items: center;\n        justify-content: space-between;\n        font-size: 0.875rem;\n        width: 100%;\n        margin-top: 0.5rem;\n      }\n      .feed-avatar {\n        color: #171717;\n        display: flex;\n        align-items: center;\n        overflow: hidden;\n      }\n      .feed-avatar img {\n        width: 1.25rem;\n        height: 1.25rem;\n        border-radius: 9999px;\n        margin-right: 0.25rem;\n      }\n      .feed-stats {\n        color: #6b7280;\n        font-size: 0.75rem;\n        white-space: nowrap;\n      }\n    </style>\n  </head>\n  <body>\n    <div id="app" class="app">\n      <div id="bookmarks-bar" class="bookmarks-bar">\n        <div class="social-links">\n          <a href="https://twitter.com/websim_ai" class="social-link">\n            <img\n              src="https://abs.twimg.com/favicons/twitter.ico"\n              alt="Twitter favicon"\n              class="social-icon"\n            />\n            <span>@websim_ai</span>\n          </a>\n          <a href="https://discord.gg/websim" class="social-link">\n            <img\n              src="https://assets-global.website-files.com/6257adef93867e50d84d30e2/636e0a6a49cf127bf92de1e2_icon_clyde_blurple_RGB.png"\n              alt="Discord favicon"\n              class="social-icon"\n            />\n            <span>discord.gg/websim</span>\n          </a>\n          <a href="https://www.reddit.com/r/WebSim" class="social-link">\n            <img\n              src="https://www.redditstatic.com/desktop2x/img/favicon/android-icon-192x192.png"\n              alt="Reddit favicon"\n              class="social-icon"\n            />\n            <span>r/WebSim</span>\n          </a>\n        </div>\n      </div>\n      <div class="logo footer-logo">\n        <span>w</span><span>e</span><span>b</span><span>s</span><span>i</span\n        ><span>m</span>\n      </div>\n      <div class="container">\n        <div class="section">\n          <h1 class="section-title">Last Creation</h1>\n          <div class="grid-container">\n            <div class="loading-text" v-if="loadingLastPage">Loading...</div>\n            <feed-item\n              v-for="item in lastPage"\n              :key="item.site_id"\n              :feed-item="item"\n            ></feed-item>\n          </div>\n        </div>\n        <div class="section">\n          <div class="section-header">\n            <h1 class="section-title">{{ feedTitle }}</h1>\n            <div class="pill-buttons">\n              <button\n                class="pill-button"\n                :class="{ active: activeTab === \'likes\', inactive: activeTab !== \'likes\' }"\n                @click="changeTab(\'likes\')"\n              >\n                Liked\n              </button>\n              <button\n                class="pill-button"\n                :class="{ active: activeTab === \'new_bookmarks\', inactive: activeTab !== \'new_bookmarks\' }"\n                @click="changeTab(\'new_bookmarks\')"\n              >\n                New\n              </button>\n              <span class="pill-button-group">\n                <button\n                  class="pill-button"\n                  :class="{ active: activeTab === \'top_day\', inactive: activeTab !== \'top_day\' }"\n                  @click="changeTab(\'top_day\')"\n                >\n                  Today\n                </button>\n                <button\n                  class="pill-button"\n                  :class="{ active: activeTab === \'top_week\', inactive: activeTab !== \'top_week\' }"\n                  @click="changeTab(\'top_week\')"\n                >\n                  Week\n                </button>\n                <button\n                  class="pill-button"\n                  :class="{ active: activeTab === \'top_month\', inactive: activeTab !== \'top_month\' }"\n                  @click="changeTab(\'top_month\')"\n                >\n                  Month\n                </button>\n              </span>\n            </div>\n          </div>\n        </div>\n        <div class="grid-container">\n          <div class="loading-text" v-if="loading">Loading...</div>\n          <feed-item\n            v-for="item in currentFeed"\n            :key="item.site_id"\n            :feed-item="item"\n          ></feed-item>\n        </div>\n      </div>\n    </div>\n    <script>\n      const { createApp } = Vue;\n      const app = createApp({\n        data() {\n          return {\n            activeTab: localStorage.getItem("activeTab") || "top_week",\n            loading: true,\n            loadingLastPage: true,\n            lastPage: [],\n            feedData: {\n              likes: [],\n              new_bookmarks: [],\n              top_day: [],\n              top_week: [],\n              top_month: [],\n            },\n          };\n        },\n        computed: {\n          feedTitle() {\n            return {\n              likes: "My Likes",\n              new_bookmarks: "New",\n              top_day: "Top Today",\n              top_week: "Top Week",\n              top_month: "Top Month",\n            }[this.activeTab];\n          },\n          currentFeed() {\n            return this.feedData[this.activeTab];\n          },\n        },\n        methods: {\n          async fetchLastPage() {\n            try {\n              const response = await fetch("/api/last_site", {\n                method: "GET",\n              });\n              const data = await response.json();\n              this.lastPage = data.map((site) => ({\n                site_id: site.id,\n                title: site.title,\n                simulated_url: site.url,\n                username: site.username,\n                avatar_url: site.avatar_url,\n              }));\n            } catch (error) {\n              console.error("Error fetching last page:", error);\n            }\n            this.loadingLastPage = false;\n          },\n          async fetchLikes() {\n            try {\n              const userid = window.params?.profile_user_id;\n              const response = await fetch("/api/likes", {\n                method: "POST",\n                body: JSON.stringify({ userid }),\n                headers: {\n                  "Content-Type": "application/json",\n                },\n              });\n              const data = await response.json();\n              this.feedData["likes"] = data.data.sort(\n                (a, b) => new Date(b.liked_at) - new Date(a.liked_at)\n              );\n            } catch (error) {\n              console.error("Error fetching likes:", error);\n            }\n          },\n          async fetchBookmarks() {\n            try {\n              const response = await fetch("/api/bookmarks", {\n                headers: {\n                  "Content-Type": "application/json",\n                },\n              });\n              const { data } = await response.json();\n              this.feedData["new_bookmarks"] = data;\n            } catch (error) {\n              console.error("Error fetching likes:", error);\n            }\n          },\n\n          async fetchTrending(tab) {\n            const maxAgeHours = {\n              top_day: 24,\n              top_week: 168,\n              top_month: 720,\n              top_year: 8760,\n            }[tab];\n\n            const response = await fetch(\n              `/api/trending?${new URLSearchParams({\n                max_age_hours: maxAgeHours,\n              })}`\n            );\n            const data = await response.json();\n            this.feedData[tab] = data.data;\n          },\n          async fetchFeedData(tab) {\n            try {\n              if (tab === "likes") {\n                await this.fetchLikes();\n                this.loading = false;\n                return;\n              } else if (tab.includes("top")) {\n                await this.fetchTrending(tab);\n                this.loading = false;\n                return;\n              } else if (tab === "new_bookmarks") {\n                await this.fetchBookmarks();\n                this.loading = false;\n                return;\n              }\n            } catch (error) {\n              console.error(error);\n            }\n          },\n          async changeTab(tab) {\n            this.activeTab = tab;\n\n            if (this.feedData[tab].length === 0) {\n              this.loading = true;\n              await this.fetchFeedData(tab);\n              this.loading = false;\n            }\n            localStorage.setItem("activeTab", tab);\n          },\n        },\n        created() {\n          this.fetchFeedData(this.activeTab);\n          this.fetchLastPage();\n        },\n      });\n      app.component("feed-item", {\n        props: ["feedItem"],\n        template: `\n<a class="feed-item" :href="\'https://websim.ai/c/\' + feedItem.site_id" target="_parent" tabindex="-1">\n    <div class="feed-image">\n      <img :src="\'https://images.websim.ai/v1/site/\' + feedItem.site_id + \'/600\'"\n            @error="handleImageError" width="600" height="315" />\n    </div>\n    <div class="feed-content">\n        <div>\n            <h3 class="feed-title">{{ feedItem.title || \'Untitled\' }}</h3>\n            <a class="feed-url"\n                :href="\'https://websim.ai/c/\' + feedItem.site_id" target="_parent"\n                v-html="formatUrl(feedItem.simulated_url)"></a>\n        </div>\n        <div class="feed-footer">\n            <a v-if="feedItem.avatar_url" :href="\'https://websim.ai/@\' + feedItem.username" class="feed-avatar">\n              <img :src="feedItem.avatar_url" alt="Avatar" />\n              <span>{{ feedItem.username }}</span>\n            </a>\n            <span class="feed-stats">\n              <span v-if="feedItem.likes"> ♡{{ feedItem.likes }} </span>\n                <span v-if="feedItem.views" class="ml-1">\n                <svg width="12" height="12" viewBox="0 0 24 24" fill="none"  stroke="currentColor" stroke-width="2.5" class="inline-block">\n                  <line x1="6"  y1="8" x2="6" y2="20" />\n                  <line x1="10" y1="1" x2="10" y2="20" />\n                  <line x1="14" y1="11" x2="14" y2="20"/>\n                  <line x1="18" y1="6" x2="18" y2="20"/>\n                </svg>{{ feedItem.views }}  </span>\n            </span>\n        </div>\n    </div>\n</a>\n    `,\n        methods: {\n          handleImageError(event) {\n            event.target.style.display = "none";\n          },\n          formatUrl(url) {\n            if (!url) return "";\n            return url\n              .replace(/&/g, "&amp;")\n              .replace(/</g, "&lt;")\n              .replace(/>/g, "&gt;")\n              .replace(/"/g, "&quot;")\n              .replace(/\'/g, "&#039;");\n          },\n        },\n      });\n\n      app.mount("#app");\n    </script>\n  </body>\n</html>\n',i='<html>\n  <head>\n    <base href="https://websim.ai/" />\n    <title>websim.ai</title>\n    <script>\n      if (\n        document.cookie\n          .split("; ")\n          .find((row) => row.startsWith("nosleep="))\n          ?.split("=")[1] === "true"\n      ) {\n        document.documentElement.classList.add("dark");\n      }\n    </script>\n    <script src="https://unpkg.com/vue@3/dist/vue.global.js"></script>\n    <style>\n      *,\n      *::before,\n      *::after {\n        box-sizing: border-box;\n      }\n      a {\n        color: inherit;\n        text-decoration: none;\n      }\n      body {\n        margin: 0;\n        font-family: -apple-system, BlinkMacSystemFont, avenir next, avenir,\n          segoe ui, helvetica neue, helvetica, Cantarell, Ubuntu, roboto, noto,\n          arial, sans-serif;\n      }\n      body::-webkit-scrollbar {\n        display: none;\n      }\n      .dark body {\n        color: #f3f4f6;\n        background: #171717;\n      }\n      .logo {\n        font-family: "Comic Sans MS", cursive;\n        text-shadow: 2px 2px 4px rgba(0, 0, 0, 0.5);\n        letter-spacing: 0.1em;\n        font-weight: bold;\n      }\n      .logo span {\n        display: inline-block;\n      }\n      .logo span:nth-child(1) {\n        color: #4285f4;\n        transform: rotate(-10deg);\n      }\n      .logo span:nth-child(2) {\n        color: #ea4335;\n        transform: rotate(5deg) translateY(-0.2rem);\n      }\n      .logo span:nth-child(3) {\n        color: #fbbc05;\n        transform: rotate(-5deg) translateY(0.1rem);\n      }\n      .logo span:nth-child(4) {\n        color: #4285f4;\n        transform: rotate(10deg) translateY(-0.2rem);\n      }\n      .logo span:nth-child(5) {\n        color: #34a853;\n        transform: rotate(-10deg) translateY(0.2rem);\n      }\n      .logo span:nth-child(6) {\n        color: #ea4335;\n        transform: rotate(5deg) translateY(-0.2rem);\n      }\n      .dark .logo span:nth-child(1) {\n        color: rgb(254, 240, 138);\n      }\n      .dark .logo span:nth-child(2) {\n        color: rgb(153, 246, 228);\n      }\n      .dark .logo span:nth-child(3) {\n        color: rgb(56, 189, 248);\n      }\n      .dark .logo span:nth-child(4) {\n        color: rgb(254, 240, 138);\n      }\n      .dark .logo span:nth-child(5) {\n        color: rgb(249, 168, 212);\n      }\n      .dark .logo span:nth-child(6) {\n        color: rgb(153, 246, 228);\n      }\n      .login {\n        display: block;\n        padding: 4px 8px;\n        border-radius: 5px;\n        font-size: 0.875rem;\n        background-color: #e5e7eb;\n        color: #374151;\n      }\n      .app {\n        display: flex;\n        flex-direction: column;\n        justify-content: flex-start;\n        min-height: 100vh;\n      }\n      .bookmarks-bar {\n        display: flex;\n        justify-content: space-between;\n        align-items: center;\n        flex-wrap: wrap;\n        gap: 1rem;\n        padding: 0.5rem;\n      }\n      .social-links {\n        display: flex;\n        flex-wrap: wrap;\n        gap: 1rem;\n      }\n      .social-link:any-link {\n        display: flex;\n        align-items: center;\n        column-gap: 0.25rem;\n        color: inherit;\n        text-decoration: none;\n      }\n      .social-link:hover {\n        color: #4d90fe;\n      }\n      .social-icon {\n        width: 1rem;\n        height: 1rem;\n      }\n      .footer-logo {\n        position: fixed;\n        bottom: 1rem;\n        right: 1rem;\n        z-index: 10;\n        font-size: 1.5rem;\n      }\n      .container {\n        max-width: 1280px;\n        width: 100%;\n        margin: 0 auto;\n        padding: 0.5rem;\n      }\n      .section {\n        border-radius: 0.375rem;\n        margin: 1rem 0;\n      }\n      .section-header {\n        display: flex;\n        flex-wrap: wrap;\n        align-items: center;\n        gap: 0.5rem;\n      }\n      .section-title {\n        flex: 1;\n        white-space: nowrap;\n        font-size: 1.25rem;\n        font-weight: 600;\n        color: #171717;\n        margin-top: 0.5rem;\n        margin-bottom: 1rem;\n      }\n      .dark .section-title {\n        color: #f3f4f6;\n      }\n      .grid-container {\n        display: grid;\n        grid-template-columns: repeat(1, minmax(0, 1fr));\n        gap: 1rem;\n      }\n      @media (min-width: 640px) {\n        .grid-container {\n          grid-template-columns: repeat(2, minmax(0, 1fr));\n        }\n      }\n      @media (min-width: 768px) {\n        .grid-container {\n          grid-template-columns: repeat(3, minmax(0, 1fr));\n        }\n      }\n      @media (min-width: 1024px) {\n        .grid-container {\n          grid-template-columns: repeat(4, minmax(0, 1fr));\n        }\n      }\n      .loading-text {\n        color: #6b7280;\n        margin-top: 0.5rem;\n      }\n      .pill-buttons {\n        display: flex;\n        column-gap: 0.5rem;\n        margin-left: 0.5rem;\n      }\n      .pill-button {\n        appearance: none;\n        border: none;\n        padding: 0.5rem 0.75rem;\n        border-radius: 9999px;\n        font-size: 0.875rem;\n        cursor: pointer;\n      }\n      .pill-button.active {\n        background-color: #4d90fe;\n        color: white;\n      }\n      .pill-button.inactive {\n        background-color: #e5e7eb;\n        color: #374151;\n      }\n      .pill-button-group {\n        display: flex;\n      }\n      .pill-button-group .pill-button:not(:last-child) {\n        border-top-right-radius: 0;\n        border-bottom-right-radius: 0;\n      }\n      .pill-button-group .pill-button:not(:first-child) {\n        border-top-left-radius: 0;\n        border-bottom-left-radius: 0;\n      }\n      .feed-item {\n        display: flex;\n        flex-direction: column;\n        background-color: #f3f4f6;\n        border-radius: 0.375rem;\n        width: 100%;\n        border: 1px solid #d1d5db;\n        transition: background-color 0.2s, border-color 0.2s;\n      }\n      .feed-item:hover {\n        background-color: #e5e7eb;\n        border-color: #6b7280;\n      }\n      .feed-image {\n        display: flex;\n        width: 100%;\n      }\n      .feed-image img {\n        display: block;\n        width: 100%;\n        height: auto;\n        border-top-left-radius: 0.375rem;\n        border-top-right-radius: 0.375rem;\n      }\n      .feed-content {\n        padding: 0.5rem;\n        text-align: left;\n        overflow: hidden;\n        width: 100%;\n        box-sizing: border-box;\n        display: flex;\n        flex-direction: column;\n      }\n      .feed-title {\n        font-size: 1.125rem;\n        font-weight: 500;\n        color: #1f2937;\n        white-space: nowrap;\n        text-overflow: ellipsis;\n        overflow: hidden;\n        margin-bottom: 0.25rem;\n      }\n      .feed-url {\n        white-space: nowrap;\n        overflow: hidden;\n        text-overflow: ellipsis;\n        max-width: 100%;\n        color: #2563eb;\n        text-decoration: none;\n      }\n      .feed-url:hover {\n        text-decoration: underline;\n      }\n      .feed-footer {\n        display: flex;\n        align-items: center;\n        justify-content: space-between;\n        font-size: 0.875rem;\n        width: 100%;\n        margin-top: 0.5rem;\n      }\n      .feed-avatar {\n        color: #171717;\n        display: flex;\n        align-items: center;\n        overflow: hidden;\n      }\n      .feed-avatar img {\n        width: 1.25rem;\n        height: 1.25rem;\n        border-radius: 9999px;\n        margin-right: 0.25rem;\n      }\n      .feed-stats {\n        color: #6b7280;\n        font-size: 0.75rem;\n        white-space: nowrap;\n      }\n    </style>\n  </head>\n\n  <body>\n    <div id="app" class="app">\n      <div class="logo footer-logo">\n        <span>w</span><span>e</span><span>b</span><span>s</span><span>i</span\n        ><span>m</span>\n      </div>\n      <div class="container">\n        <div class="section">\n          <div class="section-header">\n            <h1 class="section-title">{{ username }}\'s Public Bookmarks</h1>\n          </div>\n        </div>\n        <div class="grid-container">\n          <div class="loading-text" v-if="loading">Loading...</div>\n          <feed-item\n            v-for="item in bookmarks"\n            :key="item.site_id"\n            :feed-item="item"\n          ></feed-item>\n        </div>\n      </div>\n    </div>\n    <script>\n      (async () => {\n        const { createApp } = Vue;\n        const params = await window.__get_params__();\n        const username = params.pathname.split("/@").pop();\n        const app = createApp({\n          data() {\n            return {\n              loading: true,\n              username,\n              bookmarks: [],\n            };\n          },\n          methods: {\n            async fetchBookmarks() {\n              try {\n                const response = await fetch(`/api/bookmarks/${username}`, {\n                  headers: {\n                    "Content-Type": "application/json",\n                  },\n                });\n                const data = await response.json();\n                this.bookmarks = data;\n              } catch (error) {\n                console.error("Error fetching bookmarks:", error);\n              }\n              this.loading = false;\n            },\n          },\n          created() {\n            this.fetchBookmarks();\n          },\n        });\n        app.component("feed-item", {\n          props: ["feedItem"],\n          template: `\n          <a class="feed-item" :href="\'https://websim.ai/c/\' + feedItem.site_id" target="_parent" tabindex="-1">\n    <div class="feed-image">\n      <img :src="\'https://images.websim.ai/v1/site/\' + feedItem.site_id + \'/600\'"\n            @error="handleImageError" width="600" height="315" />\n    </div>\n    <div class="feed-content">\n        <div>\n            <h3 class="feed-title">{{ feedItem.title || \'Untitled\' }}</h3>\n            <a class="feed-url"\n                :href="\'https://websim.ai/c/\' + feedItem.site_id" target="_parent"\n                v-html="formatUrl(feedItem.simulated_url)"></a>\n        </div>\n    </div>\n</a>\n`,\n          methods: {\n            handleImageError(event) {\n              event.target.style.display = "none";\n            },\n            formatUrl(url) {\n              if (!url) return "";\n              return url\n                .replace(/&/g, "&amp;")\n                .replace(/</g, "&lt;")\n                .replace(/>/g, "&gt;")\n                .replace(/"/g, "&quot;")\n                .replace(/\'/g, "&#039;");\n            },\n          },\n        });\n        app.mount("#app");\n      })();\n    </script>\n  </body>\n</html>\n',s='<html>\n  <head>\n    <base href="https://websim.ai/?hyperstitioning=true" />\n    <title>websim.ai</title>\n    <script>\n      if (\n        document.cookie\n          .split("; ")\n          .find((row) => row.startsWith("nosleep="))\n          ?.split("=")[1] === "true"\n      ) {\n        document.documentElement.classList.add("dark");\n      }\n    </script>\n    <script src="https://unpkg.com/vue@3/dist/vue.global.js"></script>\n    <style>\n      *,\n      *::before,\n      *::after {\n        box-sizing: border-box;\n      }\n      a {\n        color: inherit;\n        text-decoration: none;\n      }\n      body {\n        margin: 0;\n        font-family: -apple-system, BlinkMacSystemFont, avenir next, avenir,\n          segoe ui, helvetica neue, helvetica, Cantarell, Ubuntu, roboto, noto,\n          arial, sans-serif;\n      }\n      body::-webkit-scrollbar {\n        display: none;\n      }\n      .dark body {\n        color: #f3f4f6;\n        background: #171717;\n      }\n      .logo {\n        font-family: "Comic Sans MS", cursive;\n        text-shadow: 2px 2px 4px rgba(0, 0, 0, 0.5);\n        letter-spacing: 0.1em;\n        font-weight: bold;\n      }\n      .logo span {\n        display: inline-block;\n      }\n      .logo span:nth-child(1) {\n        color: #4285f4;\n        transform: rotate(-10deg);\n      }\n      .logo span:nth-child(2) {\n        color: #ea4335;\n        transform: rotate(5deg) translateY(-0.2rem);\n      }\n      .logo span:nth-child(3) {\n        color: #fbbc05;\n        transform: rotate(-5deg) translateY(0.1rem);\n      }\n      .logo span:nth-child(4) {\n        color: #4285f4;\n        transform: rotate(10deg) translateY(-0.2rem);\n      }\n      .logo span:nth-child(5) {\n        color: #34a853;\n        transform: rotate(-10deg) translateY(0.2rem);\n      }\n      .logo span:nth-child(6) {\n        color: #ea4335;\n        transform: rotate(5deg) translateY(-0.2rem);\n      }\n      .dark .logo span:nth-child(1) {\n        color: rgb(254, 240, 138);\n      }\n      .dark .logo span:nth-child(2) {\n        color: rgb(153, 246, 228);\n      }\n      .dark .logo span:nth-child(3) {\n        color: rgb(56, 189, 248);\n      }\n      .dark .logo span:nth-child(4) {\n        color: rgb(254, 240, 138);\n      }\n      .dark .logo span:nth-child(5) {\n        color: rgb(249, 168, 212);\n      }\n      .dark .logo span:nth-child(6) {\n        color: rgb(153, 246, 228);\n      }\n      .login {\n        display: block;\n        padding: 4px 8px;\n        border-radius: 5px;\n        font-size: 0.875rem;\n        background-color: #e5e7eb;\n        color: #374151;\n      }\n      .app {\n        display: flex;\n        flex-direction: column;\n        justify-content: flex-start;\n        min-height: 100vh;\n      }\n      .bookmarks-bar {\n        display: flex;\n        justify-content: space-between;\n        align-items: center;\n        flex-wrap: wrap;\n        gap: 1rem;\n        padding: 0.5rem;\n      }\n      .social-links {\n        display: flex;\n        flex-wrap: wrap;\n        gap: 1rem;\n      }\n      .social-link:any-link {\n        display: flex;\n        align-items: center;\n        column-gap: 0.25rem;\n        color: inherit;\n        text-decoration: none;\n      }\n      .social-link:hover {\n        color: #4d90fe;\n      }\n      .social-icon {\n        width: 1rem;\n        height: 1rem;\n      }\n      .footer-logo {\n        position: fixed;\n        bottom: 1rem;\n        right: 1rem;\n        z-index: 10;\n        font-size: 1.5rem;\n      }\n      .container {\n        max-width: 1280px;\n        width: 100%;\n        margin: 0 auto;\n        padding: 0.5rem;\n      }\n      .section {\n        border-radius: 0.375rem;\n        margin: 1rem 0;\n      }\n      .section-header {\n        display: flex;\n        flex-wrap: wrap;\n        align-items: center;\n        gap: 0.5rem;\n      }\n      .section-title {\n        flex: 1;\n        white-space: nowrap;\n        font-size: 1.25rem;\n        font-weight: 600;\n        color: #171717;\n        margin-top: 0.5rem;\n        margin-bottom: 1rem;\n      }\n      .dark .section-title {\n        color: #f3f4f6;\n      }\n      .grid-container {\n        display: grid;\n        grid-template-columns: repeat(1, minmax(0, 1fr));\n        gap: 1rem;\n      }\n      @media (min-width: 640px) {\n        .grid-container {\n          grid-template-columns: repeat(2, minmax(0, 1fr));\n        }\n      }\n      @media (min-width: 768px) {\n        .grid-container {\n          grid-template-columns: repeat(3, minmax(0, 1fr));\n        }\n      }\n      @media (min-width: 1024px) {\n        .grid-container {\n          grid-template-columns: repeat(4, minmax(0, 1fr));\n        }\n      }\n      .loading-text {\n        color: #6b7280;\n        margin-top: 0.5rem;\n      }\n      .pill-buttons {\n        display: flex;\n        column-gap: 0.5rem;\n        margin-left: 0.5rem;\n      }\n      .pill-button {\n        appearance: none;\n        border: none;\n        padding: 0.5rem 0.75rem;\n        border-radius: 9999px;\n        font-size: 0.875rem;\n        cursor: pointer;\n      }\n      .pill-button.active {\n        background-color: #4d90fe;\n        color: white;\n      }\n      .pill-button.inactive {\n        background-color: #e5e7eb;\n        color: #374151;\n      }\n      .pill-button-group {\n        display: flex;\n      }\n      .pill-button-group .pill-button:not(:last-child) {\n        border-top-right-radius: 0;\n        border-bottom-right-radius: 0;\n      }\n      .pill-button-group .pill-button:not(:first-child) {\n        border-top-left-radius: 0;\n        border-bottom-left-radius: 0;\n      }\n      .feed-item {\n        display: flex;\n        flex-direction: column;\n        background-color: #f3f4f6;\n        border-radius: 0.375rem;\n        width: 100%;\n        border: 1px solid #d1d5db;\n        transition: background-color 0.2s, border-color 0.2s;\n      }\n      .feed-item:hover {\n        background-color: #e5e7eb;\n        border-color: #6b7280;\n      }\n      .feed-image {\n        display: flex;\n        width: 100%;\n      }\n      .feed-image img {\n        display: block;\n        width: 100%;\n        height: auto;\n        border-top-left-radius: 0.375rem;\n        border-top-right-radius: 0.375rem;\n      }\n      .feed-content {\n        padding: 0.5rem;\n        text-align: left;\n        overflow: hidden;\n        width: 100%;\n        box-sizing: border-box;\n        display: flex;\n        flex-direction: column;\n      }\n      .feed-title {\n        font-size: 1.125rem;\n        font-weight: 500;\n        color: #1f2937;\n        white-space: nowrap;\n        text-overflow: ellipsis;\n        overflow: hidden;\n        margin-bottom: 0.25rem;\n      }\n      .feed-url {\n        white-space: nowrap;\n        overflow: hidden;\n        text-overflow: ellipsis;\n        max-width: 100%;\n        color: #2563eb;\n        text-decoration: none;\n      }\n      .feed-url:hover {\n        text-decoration: underline;\n      }\n      .feed-footer {\n        display: flex;\n        align-items: center;\n        justify-content: space-between;\n        font-size: 0.875rem;\n        width: 100%;\n        margin-top: 0.5rem;\n      }\n      .feed-avatar {\n        color: #171717;\n        display: flex;\n        align-items: center;\n        overflow: hidden;\n      }\n      .feed-avatar img {\n        width: 1.25rem;\n        height: 1.25rem;\n        border-radius: 9999px;\n        margin-right: 0.25rem;\n      }\n      .feed-stats {\n        color: #6b7280;\n        font-size: 0.75rem;\n        white-space: nowrap;\n      }\n    </style>\n  </head>\n  <body>\n    <div id="app" class="app">\n      <div id="bookmarks-bar" class="bookmarks-bar">\n        <div class="social-links">\n          <a href="https://twitter.com/websim_ai" class="social-link">\n            <img\n              src="https://abs.twimg.com/favicons/twitter.ico"\n              alt="Twitter favicon"\n              class="social-icon"\n            />\n            <span>@websim_ai</span>\n          </a>\n          <a href="https://discord.gg/websim" class="social-link">\n            <img\n              src="https://assets-global.website-files.com/6257adef93867e50d84d30e2/636e0a6a49cf127bf92de1e2_icon_clyde_blurple_RGB.png"\n              alt="Discord favicon"\n              class="social-icon"\n            />\n            <span>discord.gg/websim</span>\n          </a>\n          <a href="https://www.reddit.com/r/WebSim" class="social-link">\n            <img\n              src="https://www.redditstatic.com/desktop2x/img/favicon/android-icon-192x192.png"\n              alt="Reddit favicon"\n              class="social-icon"\n            />\n            <span>r/WebSim</span>\n          </a>\n        </div>\n        <a href="https://websim.ai/auth/login" class="login">Login</a>\n      </div>\n      <div class="logo footer-logo">\n        <span>w</span><span>e</span><span>b</span><span>s</span><span>i</span\n        ><span>m</span>\n      </div>\n      <div class="container">\n        <div class="section">\n          <div class="section-header">\n            <h1 class="section-title">{{ feedTitle }}</h1>\n            <div class="pill-buttons">\n              <button\n                class="pill-button"\n                :class="{ active: activeTab === \'new_bookmarks\', inactive: activeTab !== \'new_bookmarks\' }"\n                @click="changeTab(\'new_bookmarks\')"\n              >\n                New\n              </button>\n              <span class="pill-button-group">\n                <button\n                  class="pill-button"\n                  :class="{ active: activeTab === \'top_day\', inactive: activeTab !== \'top_day\' }"\n                  @click="changeTab(\'top_day\')"\n                >\n                  Today\n                </button>\n                <button\n                  class="pill-button"\n                  :class="{ active: activeTab === \'top_week\', inactive: activeTab !== \'top_week\' }"\n                  @click="changeTab(\'top_week\')"\n                >\n                  Week\n                </button>\n                <button\n                  class="pill-button"\n                  :class="{ active: activeTab === \'top_month\', inactive: activeTab !== \'top_month\' }"\n                  @click="changeTab(\'top_month\')"\n                >\n                  Month\n                </button>\n              </span>\n            </div>\n          </div>\n        </div>\n        <div class="grid-container">\n          <div class="loading-text" v-if="loading">Loading...</div>\n          <feed-item\n            v-for="item in currentFeed"\n            :key="item.site_id"\n            :feed-item="item"\n          ></feed-item>\n        </div>\n      </div>\n    </div>\n    <script>\n      const { createApp } = Vue;\n      const app = createApp({\n        data() {\n          let activeTab = localStorage.getItem("activeTab");\n          if (!activeTab || activeTab === "likes") {\n            activeTab = "top_week";\n          }\n          return {\n            activeTab: activeTab,\n            loading: true,\n            feedData: {\n              new_bookmarks: [],\n              top_day: [],\n              top_week: [],\n              top_month: [],\n            },\n          };\n        },\n        computed: {\n          feedTitle() {\n            return {\n              new_bookmarks: "New",\n              top_day: "Top Today",\n              top_week: "Top Week",\n              top_month: "Top Month",\n            }[this.activeTab];\n          },\n          currentFeed() {\n            return this.feedData[this.activeTab];\n          },\n        },\n        methods: {\n          async fetchBookmarks() {\n            try {\n              const response = await fetch("/api/bookmarks", {\n                headers: {\n                  "Content-Type": "application/json",\n                },\n              });\n              const { data } = await response.json();\n              this.feedData["new_bookmarks"] = data;\n            } catch (error) {\n              console.error("Error fetching likes:", error);\n            }\n          },\n\n          async fetchTrending(tab) {\n            const maxAgeHours = {\n              top_day: 24,\n              top_week: 168,\n              top_month: 720,\n              top_year: 8760,\n            }[tab];\n\n            const response = await fetch(\n              `/api/trending?${new URLSearchParams({\n                max_age_hours: maxAgeHours,\n              })}`\n            );\n            const data = await response.json();\n            this.feedData[tab] = data.data;\n          },\n          async fetchFeedData(tab) {\n            try {\n              if (tab.includes("top")) {\n                await this.fetchTrending(tab);\n                this.loading = false;\n                return;\n              } else if (tab === "new_bookmarks") {\n                await this.fetchBookmarks();\n                this.loading = false;\n                return;\n              }\n            } catch (error) {\n              console.error(error);\n            }\n          },\n          async changeTab(tab) {\n            this.activeTab = tab;\n\n            if (this.feedData[tab].length === 0) {\n              this.loading = true;\n              await this.fetchFeedData(tab);\n              this.loading = false;\n            }\n            localStorage.setItem("activeTab", tab);\n          },\n        },\n        created() {\n          this.fetchFeedData(this.activeTab);\n        },\n      });\n      app.component("feed-item", {\n        props: ["feedItem"],\n        template: `\n<a class="feed-item" :href="\'https://websim.ai/c/\' + feedItem.site_id" target="_parent" tabindex="-1">\n    <div class="feed-image">\n        <img :src="\'https://images.websim.ai/v1/site/\' + feedItem.site_id + \'/600\'"\n            @error="handleImageError" width="600" height="315" />\n    </div>\n    <div class="feed-content">\n        <div>\n            <h3 class="feed-title">{{ feedItem.title || \'Untitled\' }}</h3>\n            <a class="feed-url"\n                :href="\'https://websim.ai/c/\' + feedItem.site_id" target="_parent"\n                v-html="formatUrl(feedItem.simulated_url)"></a>\n        </div>\n        <div class="feed-footer">\n            <a v-if="feedItem.avatar_url" :href="\'https://websim.ai/@\' + feedItem.username" class="feed-avatar">\n              <img :src="feedItem.avatar_url" alt="Avatar"\n               />\n              <span>{{ feedItem.username }}</span>\n            </a>\n            <span class="feed-stats">\n              <span v-if="feedItem.likes"> ♡{{ feedItem.likes }} </span>\n                <span v-if="feedItem.views" class="ml-1">\n                <svg width="12" height="12" viewBox="0 0 24 24" fill="none"  stroke="currentColor" stroke-width="2.5" class="inline-block">\n                  <line x1="6"  y1="8" x2="6" y2="20" />\n                  <line x1="10" y1="1" x2="10" y2="20" />\n                  <line x1="14" y1="11" x2="14" y2="20"/>\n                  <line x1="18" y1="6" x2="18" y2="20"/>\n                </svg>{{ feedItem.views }}  </span>\n            </span>\n        </div>\n    </div>\n</a>\n    `,\n        methods: {\n          handleImageError(event) {\n            event.target.style.display = "none";\n          },\n          formatUrl(url) {\n            if (!url) return "";\n            return url\n              .replace(/&/g, "&amp;")\n              .replace(/</g, "&lt;")\n              .replace(/>/g, "&gt;")\n              .replace(/"/g, "&quot;")\n              .replace(/\'/g, "&#039;");\n          },\n        },\n      });\n\n      app.mount("#app");\n    </script>\n  </body>\n</html>\n';var l=o.INVALID_PROFILE_HTML,c=o.LANDING_HTML,d=o.LOGGED_IN_HTML},77452:function(e,n,t){"use strict";t.d(n,{tT:function(){return S},o2:function(){return N},CommonProviders:function(){return P},DE:function(){return _},cC:function(){return k},ze:function(){return L},JI:function(){return z},pV:function(){return T},Xn:function(){return A},Wo:function(){return C},Iq:function(){return j},M6:function(){return U},r$:function(){return E}});var r=t(37821),o=t(92268),a=t(46587),i=t(61153),s=t(71786),l=t(64722),c=t(30675),d=t(17344),u=t(80997);let p=e=>["site_data",e];var m=t(54383);let f=async e=>{(0,m.Z)(e.startsWith("/"),"Route must start with /");let n=await fetch("/api/site_data".concat(e));if(!n.ok)throw Error(n.statusText);return await n.json()};var g=t(87202),h=t(77362),b=t(84578),v=t.n(b),x=t(90168),w=t(58078),y=t(46302);let k=(0,w.createContext)(o.XN),z=(0,w.createContext)(void 0),j=()=>(0,w.useContext)(k),_=(0,w.createContext)(null),C=()=>(0,w.useContext)(_),T=(0,w.createContext)(!1),I=(0,w.createContext)(()=>{});function E(){return[(0,w.useContext)(T),(0,w.useContext)(I)]}function P(e){let[n,t]=(0,w.useState)(!1),o=(0,x.usePathname)(),a=(0,u.W)(o),i=(0,g.Dy)((0,g.VT)(v()()?g.LO:g.we,{activationConstraint:{distance:5}}));return(0,r.jsx)(S.Provider,{value:e.cfPagesBranch,children:(0,r.jsx)(N.Provider,{value:e.cfPagesCommitSha,children:(0,r.jsx)(A.Provider,{value:a,children:(0,r.jsx)(d.fS,{user:e.user,children:(0,r.jsx)(d.Ti.Provider,{value:e.profile,children:(0,r.jsx)(l.YI,{children:(0,r.jsx)(F,{route:a,children:(0,r.jsx)(T.Provider,{value:n,children:(0,r.jsx)(I.Provider,{value:t,children:(0,r.jsx)(D,{children:(0,r.jsx)(g.LB,{sensors:i,collisionDetection:g.pE,children:e.children})})})})})})})})})})})}let S=(0,w.createContext)(void 0),N=(0,w.createContext)(void 0),A=(0,w.createContext)(null);function D(e){let n=(0,x.usePathname)(),t=(0,u.W)(n),o=(0,c.a)(null==t?void 0:t.username),a=(0,w.useContext)(d.Ti),s=(()=>{if((null==t?void 0:t.type)==="bookmark"||(null==t?void 0:t.type)==="profile"){var e;return null===(e=o.data)||void 0===e?void 0:e.user}return a})();return(0,r.jsx)(i.Ev.Provider,{value:null!=s?s:null,children:e.children})}let L=(0,w.createContext)(void 0);function F(e){var n,t,i;let l=(0,x.usePathname)(),c=(0,h.useQuery)({queryKey:p(l),queryFn:async()=>f(l),enabled:!!l}),u=(0,w.useMemo)(()=>c.data?c.data.currentPage:null,[c.data]),m=(0,w.useMemo)(()=>{var e,n;return[...null!==(n=null===(e=c.data)||void 0===e?void 0:e.context)&&void 0!==n?n:[],...u?[u]:[]]},[u,c.data]),g=(0,w.useContext)(d.Ec),b=(0,w.useMemo)(()=>{var n,t,r;return(null===(n=e.route)||void 0===n?void 0:n.type)==="site"?e.route.siteId:(null===(t=e.route)||void 0===t?void 0:t.type)==="home"?(null==g?void 0:g.id)?a._w:o.XN:null!==(r=null==u?void 0:u.id)&&void 0!==r?r:""},[e.route,u,g]);return(0,r.jsx)(k.Provider,{value:b,children:(0,r.jsx)(_.Provider,{value:u,children:(0,r.jsx)(z.Provider,{value:null===(n=c.data)||void 0===n?void 0:n.model,children:(0,r.jsx)(L.Provider,{value:null===(t=c.data)||void 0===t?void 0:t.lore,children:(0,r.jsx)(s.f6,{history:m,children:(0,r.jsx)(y.Fd,{messages:null!==(i=m.flatMap(e=>{var n,t;return null!==(t=null===(n=e.debug)||void 0===n?void 0:n.messages)&&void 0!==t?t:[]}))&&void 0!==i?i:[],children:e.children})})})})})})}let U=()=>(0,w.useContext)(z)},56164:function(e,n,t){"use strict";t.d(n,{T:function(){return o}});var r=t(37821);function o(e){var n;return(0,r.jsxs)("div",{className:"logo ".concat(null!==(n=e.className)&&void 0!==n?n:""),children:[(0,r.jsx)("span",{className:"dark:!text-yellow-200",children:"w"}),(0,r.jsx)("span",{className:"dark:!text-teal-200",children:"e"}),(0,r.jsx)("span",{className:"dark:!text-sky-400",children:"b"}),(0,r.jsx)("span",{className:"dark:!text-yellow-200",children:"s"}),(0,r.jsx)("span",{className:"dark:!text-pink-300",children:"i"}),(0,r.jsx)("span",{className:"dark:!text-teal-200",children:"m"})]})}t(10173)},46302:function(e,n,t){"use strict";t.d(n,{Fd:function(){return s},Sg:function(){return a}});var r=t(37821),o=t(58078);let a=(0,o.createContext)(void 0),i=(0,o.createContext)(void 0);function s(e){let[n,t]=(0,o.useState)({messages:e.messages});return(0,r.jsx)(a.Provider,{value:t,children:(0,r.jsx)(i.Provider,{value:n,children:e.children})})}},61153:function(e,n,t){"use strict";t.d(n,{BookmarkController:function(){return m},Oq:function(){return p},sY:function(){return d},Ev:function(){return c},Q:function(){return u},BO:function(){return f}});var r=t(37821),o=t(77452),a=t(53644);a.z.object({avatar_url:a.z.string().optional(),username:a.z.string().min(3).max(32).regex(/^[a-zA-Z0-9_]{3,32}$/).optional(),description:a.z.string().optional()}),t(75005);var i=t(58078),s=t(17344),l=t(82366);let c=(0,i.createContext)(null),d=(0,i.createContext)(null),u=(0,i.createContext)(null),p=(0,i.createContext)({});function m(e){let[n,t]=(0,i.useState)(""),[a,m]=(0,i.useState)({}),f=(0,i.useContext)(s.Ti),g=(0,i.useContext)(c),h=f,b=(0,i.useContext)(o.Xn);return(null==b?void 0:b.type)==="profile"?h=g:(null==b?void 0:b.type)==="bookmark"&&(h=g),(0,i.useEffect)(()=>{h&&(m({userFilter:{username:h.username,slugPrefix:""}}),h.id!==(null==f?void 0:f.id)?t("@".concat(h.username)):t(""))},[f,h]),(0,i.useEffect)(()=>{let e={};(0,l.X)(e,n),m(e)},[n]),(0,r.jsx)(d.Provider,{value:n,children:(0,r.jsx)(u.Provider,{value:t,children:(0,r.jsx)(p.Provider,{value:a,children:e.children})})})}let f=()=>(0,i.useContext)(c)},82366:function(e,n,t){"use strict";t.d(n,{R:function(){return a},X:function(){return o}});var r=t(53644);r.z.object({username:r.z.string(),slugPrefix:r.z.string()});let o=(e,n)=>{let t=n.split(" "),r=[];for(let n of t){let t=/^@(\w*)\/?(.*)$/.exec(n);if(t){var o;e.userFilter={username:t[1],slugPrefix:null!==(o=t[2])&&void 0!==o?o:""};continue}r.push(n)}e.textFilter=r.join(" ")};function a(e,n,t){if(e.userFilter)return(n.id!==t.owner_id||n.username===e.userFilter.username)&&(""===e.userFilter.slugPrefix||!!(t.slug&&t.slug.startsWith(e.userFilter.slugPrefix)));if(e.textFilter){var r;return!!(t.title.toLowerCase().includes(e.textFilter.toLowerCase())||(null===(r=t.slug)||void 0===r?void 0:r.toLowerCase().includes(e.textFilter.toLowerCase())))}return!0}},77391:function(e,n,t){"use strict";t.d(n,{$5:function(){return d},Me:function(){return i},Tk:function(){return u},Tl:function(){return o},YD:function(){return l},fW:function(){return c},nP:function(){return a},ye:function(){return s}});var r=t(35238);function o(){return"true"===(0,r.X)("pin_sidebar")}function a(e){(0,r.t)("pin_sidebar",e.toString())}function i(e){(0,r.t)("b",e)}function s(){return(0,r.X)("b")}function l(e){(0,r.t)("b_open",e)}function c(){return(0,r.X)("b_open")}function d(e){(0,r.t)("active_sidebar_tab",e)}function u(){var e;return null!==(e=(0,r.X)("active_sidebar_tab"))&&void 0!==e?e:"bookmarks"}},15685:function(e,n,t){"use strict";t.d(n,{q:function(){return p}});var r=t(37821),o=t(78781),a=t(27036),i=t(14233),s=t(58078),l=t(17344),c=t(54302),d=t(87601),u=t(18151);function p(e){var n,t;let{user:c,following:d}=e,u=null!==(n=null==c?void 0:c.username)&&void 0!==n?n:void 0,p=null!==(t=null==c?void 0:c.avatar_url)&&void 0!==t?t:void 0,f=function(e){let n=(0,s.useContext)(l.Ti);if(n&&e)return n.username===e}(u),g=(0,r.jsx)(a.default,{src:p||"/default_avatar.png",alt:null!=u?u:"",width:24,height:24,className:"w-6 h-6",onError:e=>{let n=e.target;"/default_avatar.png"!==n.src&&(n.src="/default_avatar.png")}});return u?(0,r.jsxs)(o.zs.Root,{children:[(0,r.jsx)(o.zs.Trigger,{children:(0,r.jsx)(i.default,{className:"rounded-full border border-gray-200 overflow-hidden\n            dark:border-neutral-700 aria-disabled:opacity-50 block\n            focus:outline-none focus:shadow-[0_0_0_2px_white]",href:"/@".concat(u),children:g})}),(0,r.jsx)(o.zs.Content,{sideOffset:5,children:(0,r.jsxs)("div",{className:"flex flex-col items-center gap-4 min-w-28 text-sm",children:[(0,r.jsxs)(i.default,{href:"/@".concat(u),className:"flex flex-col items-center gap-4",children:[(0,r.jsx)(a.default,{className:"rounded-full",src:null!=p?p:"/default_avatar.png",alt:null!=u?u:"",width:48,height:48}),(0,r.jsxs)("div",{children:["@",u]})]}),!f&&(0,r.jsx)(m,{username:u,following:d}),(0,r.jsx)("div",{className:"flex items-center gap-4"})]})})]}):(0,r.jsx)("div",{className:"rounded-full border border-gray-200 overflow-hidden dark:border-neutral-700 block focus:outline-none focus:shadow-[0_0_0_2px_white]",children:g})}function m(e){let{username:n,following:t}=e,a=function(){let e=(0,c.h)();(0,s.useContext)(l.Ti);let n=(0,d.useQueryClient)();return(0,u.useMutation)({mutationFn:async n=>{let t=await e.follows.followUser({params:{username:n}});if(200!==t.status)throw t;return t.body.follow},onMutate:e=>{n.setQueryData(["user",e],e=>({...e,following:!0}))},onSuccess:e=>{n.invalidateQueries({queryKey:["user",e.user.username]})}})}(),i=function(){let e=(0,c.h)(),n=(0,d.useQueryClient)();return(0,u.useMutation)({mutationFn:async n=>{console.log("unfollowing user");let t=await e.follows.unfollowUser({params:{username:n}});if(200!==t.status)throw t;return n},onMutate:e=>{n.setQueryData(["user",e],e=>({...e,following:!1}))},onSuccess:e=>{n.invalidateQueries({queryKey:["user",e]})}})}();return(0,r.jsx)(o.zx,{variant:t?"outline":"solid",onClick:()=>{t?i.mutateAsync(n):a.mutateAsync(n)},children:t?"Following":"Follow"})}},71786:function(e,n,t){"use strict";t.d(n,{$n:function(){return f},NT:function(){return c},RJ:function(){return d},Tl:function(){return s},Wo:function(){return p},Yz:function(){return m},f6:function(){return u},vr:function(){return i},wC:function(){return l}});var r=t(37821),o=t(58078),a=t(38295);let i=(0,o.createContext)(void 0),s=(0,o.createContext)(void 0),l=(0,o.createContext)(void 0),c=(0,o.createContext)(void 0),d=(0,o.createContext)(void 0);function u(e){let[n,t]=(0,o.useState)(e.history),[u,p]=(0,o.useState)(e.history.length-1);(0,o.useEffect)(()=>{e.history.length>0&&(p(e.history.length-1),t(e.history))},[e.history]);let m=(0,o.useRef)(),f=(0,a.I3)();return(0,o.useEffect)(()=>{for(let e of n)e.id&&f(e.id,e)},[n,f]),(0,r.jsx)(i.Provider,{value:t,children:(0,r.jsx)(s.Provider,{value:n,children:(0,r.jsx)(c.Provider,{value:u,children:(0,r.jsx)(l.Provider,{value:p,children:(0,r.jsx)(d.Provider,{value:m,children:e.children})})})})})}function p(){let e=(0,o.useContext)(s),n=(0,o.useContext)(c);if(0!==e.length)return e[n]}function m(){let e=(0,o.useContext)(s),n=(0,o.useContext)(c);if(0!==e.length)return e[n-1]}function f(){let e=(0,o.useContext)(s),n=(0,o.useContext)(c);if(0!==e.length)return e[n+1]}},64722:function(e,n,t){"use strict";t.d(n,{$Y:function(){return a},YI:function(){return s},fP:function(){return i}});var r=t(37821),o=t(58078);let a=(0,o.createContext)("exited"),i=(0,o.createContext)(()=>{});function s(e){let[n,t]=(0,o.useState)("exited");return(0,r.jsx)(a.Provider,{value:n,children:(0,r.jsx)(i.Provider,{value:t,children:e.children})})}},23133:function(e,n,t){"use strict";t.d(n,{ML:function(){return f},W7:function(){return u},Wh:function(){return m},n8:function(){return d},q4:function(){return p},xj:function(){return g}});var r=t(37821),o=t(14581),a=t(77452),i=t(58078),s=t(56942),l=t(71786),c=t(22920);let d=(0,i.createContext)(void 0),u=(0,i.createContext)(null);function p(e){let n=(0,i.useContext)(a.DE),t=(0,i.useContext)(l.Tl),[c,p]=(0,i.useState)(void 0),m=(0,i.useContext)(a.ze);return(0,i.useEffect)(()=>{(null==n?void 0:n.id)&&m&&p(m.siteContext?(0,o.cR)(n.id,m,{allowInfiniteContext:void 0!=(0,s.Pi)()}):(0,o.cR)(n.id,{...m,siteContext:(t||[]).slice(0,-1).map(e=>({id:e.id,pinned:!1}))},{allowInfiniteContext:void 0!=(0,s.Pi)()}))},[null==n?void 0:n.id,m,t]),(0,r.jsx)(u.Provider,{value:p,children:(0,r.jsx)(d.Provider,{value:c,children:e.children})})}function m(e){let n=(0,i.useContext)(u);return()=>{n((0,c.Uy)(n=>{(null==n?void 0:n.siteContext)&&(n.siteContext=n.siteContext.filter(n=>n.id!==e))}))}}function f(e){let n=(0,i.useContext)(u);return t=>{n((0,c.Uy)(n=>{if(!(null==n?void 0:n.siteContext))return;let r=n.siteContext.find(n=>n.id===e);r&&(r.pinned=t)}))}}function g(e){var n,t;let r=(0,i.useContext)(d);return null==r?void 0:null===(t=r.siteContext)||void 0===t?void 0:null===(n=t.find(n=>n.id===e))||void 0===n?void 0:n.pinned}},38295:function(e,n,t){"use strict";t.d(n,{E7:function(){return D},ZV:function(){return A},I3:function(){return L}});var r=t(37821),o=t(53644);let a=o.z.object({type:o.z.literal("edit_element"),tagId:o.z.string(),prompt:o.z.string()}),i=o.z.object({version:o.z.literal(1),operations:o.z.array(a)});var s=t(77377),l=t(14581),c=t(75380),d=t(27950),u=t(56164),p=t(56942),m=t(39089),f=t(75005),g=t(87202),h=t(38204),b=t(4387),v=t(64816),x=t(83435),w=t(21725),y=t(78781),k=t(77362),z=t(87601),j=t(22920),_=t(27036),C=t(14233),T=t(58078),I=t(74703),E=t(11696),P=t(15685),S=t(71786),N=t(23133);function A(){let e=(0,T.useContext)(N.n8),n=null==e?void 0:e.siteContext,t=(0,T.useContext)(N.W7);return(0,g.IJ)({onDragEnd:function(e){var r,o,a,i,s,l;let{active:c,over:d}=e;if(!c||!d||!n)return;let u=null===(o=c.data)||void 0===o?void 0:null===(r=o.current)||void 0===r?void 0:r.id,p=null===(i=d.data)||void 0===i?void 0:null===(a=i.current)||void 0===a?void 0:a.id,m=null===(l=c.data)||void 0===l?void 0:null===(s=l.current)||void 0===s?void 0:s.source;if(u&&p&&m){if("bookmarkList"===m)t((0,j.Uy)(e=>{if(!e||(e.siteContext||(e.siteContext=[]),-1!==e.siteContext.findIndex(e=>e.id===u)))return;let n=e.siteContext.map(e=>e.id).indexOf(p);c.rect.current.translated&&c.rect.current.translated.top+c.rect.current.translated.height/2<d.rect.top+d.rect.height/2&&(n+=1),e.siteContext.splice(n,0,{id:u,pinned:!1})}));else if(u!==p){let e=n.findIndex(e=>e.id===u),r=n.findIndex(e=>e.id===p),o=(0,h.Rp)(n,e,r);t((0,j.Uy)(e=>{e&&(e.siteContext=o)}))}}}}),(0,r.jsx)("div",{className:"flex flex-col flex-gap-6",children:(0,r.jsxs)("div",{className:"group flex flex-0 py-2 rounded-lg flex-col-reverse relative z-0 gap-4",children:[null==n&&(0,r.jsx)("div",{className:"text-xs text-gray-400 px-2 py-2",children:"Loading..."}),n&&(0,r.jsxs)(h.Fo,{items:n,strategy:h.qw,children:[null==n?void 0:n.map((e,t)=>(0,r.jsx)(D,{siteContextItem:e,index:n.length-t-1},e.id)),0===n.length&&(0,r.jsx)("div",{className:"text-xs text-gray-400 px-2 py-2",children:"No pages in context"})]})]})})}function D(e){let n=(0,S.Wo)(),t=function(e){let n=(0,f.$)();return(0,k.useQuery)({queryKey:["historyDetails",e],queryFn:async()=>{if((0,c.kM)(e))return(0,s.D2)({messages:c.vg[e],debug:!0})[0];let t=await n.from("sites").select("id,prompt,content").eq("id",e).single();if(!t.data)throw Error("No data found");let r=t.data;if(!r.content)throw Error("No content found");return(0,s.KI)({id:r.id,prompt:r.prompt,content:r.content})}})}(e.siteContextItem.id),{attributes:o,listeners:a,setNodeRef:i,isDragging:d,transform:u,transition:m}=(0,h.nB)({id:e.siteContextItem.id,data:{id:e.siteContextItem.id,source:"siteContext"}}),g={transform:b.ux.Transform.toString(u),transition:m},v=e.index&&!(0,p.Pi)()&&e.index>=l.wn,x=(0,r.jsx)("div",{...o,...a,className:"flex flex-col w-full items-center cursor-grab",children:(0,r.jsxs)("div",{className:"flex flex-col gap-1 py-1 pb-2 w-10",children:[(0,r.jsx)("div",{className:"h-[1px] bg-gray-300 dark:bg-neutral-500"}),(0,r.jsx)("div",{className:"h-[1px] bg-gray-300 dark:bg-neutral-500"})]})});return(0,r.jsx)("div",{ref:i,style:g,className:"flex gap-4 bg-gray-100 dark:bg-neutral-800 rounded-lg ".concat(v?"opacity-60":""),children:t.data&&(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(F,{historyState:t.data,currentPage:t.data.id===(null==n?void 0:n.id)}),(0,r.jsx)(G,{historyState:t.data,currentPage:t.data.id===(null==n?void 0:n.id),handle:x})]})})}function L(){let e=(0,z.useQueryClient)();return(0,T.useCallback)((n,t)=>{e.setQueryData(["historyDetails",n],t)},[e])}function F(e){let[n,t]=(0,T.useState)(!1),{profile:o,following:a}=(0,m.i)(e.historyState.id),i=(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)("div",{className:"absolute inset-0 gray-100 flex items-center justify-center aria-hidden:hidden bg-gray-200 rounded-lg","aria-hidden":n,children:(0,r.jsx)(w.Z,{className:"w-12 h-12 text-gray-400 animate-pulse"})}),(0,r.jsx)(_.default,{placeholder:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAQAAAC1HAwCAAAAC0lEQVR42mP8/x8AAwMCAO+ip1sAAAAASUVORK5CYII=",className:"object-cover w-full h-full rounded-lg aria-hidden:hidden","aria-hidden":!n,src:"https://images.websim.ai/v1/site/".concat(e.historyState.id,"/600"),alt:"Screenshot of the page",loading:"eager",onLoad:()=>{t(!0)},width:96,height:96})]});return(0,c.kM)(e.historyState.id)&&(i=(0,r.jsx)("div",{className:"w-[96px] h-[96px] flex items-center justify-center bg-white dark:bg-neutral-900 rounded-lg",children:(0,r.jsx)(u.T,{className:""})})),(0,r.jsxs)(q,{className:"aria-selected:scale-[1.1] hover:scale-[1.1] z-10 transition-all duration-200 ease-in-out","aria-selected":e.currentPage,children:[(0,r.jsx)(C.default,{href:(0,E.l)(n=>{n.pathname=(0,E.z)(e.historyState.id)}),children:i}),(0,r.jsx)("div",{className:"absolute -bottom-1 -left-1",children:!(0,c.kM)(e.historyState.id)&&(0,r.jsx)(P.q,{user:o,following:a})})]})}function U(e){let n=(0,N.ML)(e.id),t=(0,N.xj)(e.id);return(0,r.jsx)("button",{className:"text-xs p-1 bg-white rounded-full dark:bg-neutral-700\n        ".concat(t?"opacity-100":"opacity-20","\n      "),type:"button",onClick:e=>{e.preventDefault(),n(!t)},children:(0,r.jsx)(M,{className:"w-4 h-4 text-gray-800 dark:text-white pointer-events-none"})})}t(99578);let M=e=>(0,r.jsx)("svg",{width:"800px",height:"800px",className:e.className,version:"1.1",id:"Capa_1",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 490.125 490.125",children:(0,r.jsx)("g",{children:(0,r.jsx)("g",{children:(0,r.jsx)("g",{children:(0,r.jsx)("path",{"fill-rule":"evenodd",d:"M300.625,5.025c-6.7-6.7-17.6-6.7-24.3,0l-72.6,72.6c-6.7,6.7-6.7,17.6,0,24.3l16.3,16.3l-40.3,40.3l-63.5-7 c-3-0.3-6-0.5-8.9-0.5c-21.7,0-42.2,8.5-57.5,23.8l-20.8,20.8c-6.7,6.7-6.7,17.6,0,24.3l108.5,108.5l-132.4,132.4 c-6.7,6.7-6.7,17.6,0,24.3c3.3,3.3,7.7,5,12.1,5s8.8-1.7,12.1-5l132.5-132.5l108.5,108.5c3.3,3.3,7.7,5,12.1,5s8.8-1.7,12.1-5 l20.8-20.8c17.6-17.6,26.1-41.8,23.3-66.4l-7-63.5l40.3-40.3l16.2,16.2c6.7,6.7,17.6,6.7,24.3,0l72.6-72.6c3.2-3.2,5-7.6,5-12.1 s-1.8-8.9-5-12.1L300.625,5.025z M400.425,250.025l-16.2-16.3c-6.4-6.4-17.8-6.4-24.3,0l-58.2,58.3c-3.7,3.7-5.5,8.8-4.9,14 l7.9,71.6c1.6,14.3-3.3,28.3-13.5,38.4l-8.7,8.7l-217.1-217.1l8.7-8.6c10.1-10.1,24.2-15,38.4-13.5l71.7,7.9 c5.2,0.6,10.3-1.2,14-4.9l58.2-58.2c6.7-6.7,6.7-17.6,0-24.3l-16.3-16.3l48.3-48.3l160.3,160.3L400.425,250.025z"})})})})});function R(e){let n=(0,N.Wh)(e.id);return(0,r.jsx)("button",{className:"text-xs p-1 bg-white rounded-full dark:bg-neutral-700",type:"button",onClick:e=>{e.preventDefault(),n()},children:(0,r.jsx)(v.Z,{className:"w-4 h-4 text-gray-800 dark:text-white pointer-events-none"})})}function G(e){var n;let t;let o=null===(n=e.historyState.debug)||void 0===n?void 0:n.messages.find(e=>"user"===e.role),a=o?(0,d.QE)(o.content):null;if(a){t=(0,r.jsx)("span",{children:a});let e=function(e){let n=/!edit\s+(.+)/.exec(e);if(!n)return null;try{return i.parse(JSON.parse(n[1]))}catch(e){return console.log("invalid edit payload",e),null}}(a);e&&(t=(0,r.jsx)("div",{children:e.operations.map(e=>(0,r.jsxs)("div",{className:"flex flex-row gap-1",children:[(0,r.jsx)("div",{className:"text-xs text-gray-500 dark:text-neutral-400",children:"Edit"}),(0,r.jsx)(x.Z,{className:"w-4 h-4 text-gray-500 dark:text-neutral-400"}),(0,r.jsx)("div",{children:e.prompt})]},e.tagId))}))}else t=null;let l=(0,s.l9)(e.historyState.url);return(0,r.jsxs)("div",{className:"group flex flex-row w-full py-2 gap-2 px-2 rounded-lg relative z-0 gap-4 text-xs flex items-start justify-stretch w-full text-left",children:[(0,r.jsxs)("div",{className:"text-black whitespace-pre-wrap flex flex-col items-start flex-1 dark:text-white",style:{overflowWrap:"anywhere"},children:[e.handle,(0,r.jsx)(B,{children:(0,r.jsxs)("div",{className:"flex flex-col",children:[a!==l&&(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)("div",{className:"text-xs text-gray-500 dark:text-neutral-400 whitespace-pre-wrap break-all max-h-24",children:l}),(0,r.jsx)("div",{className:"h-[1rem]"})]}),(0,r.jsx)("span",{children:t})]})})]}),(0,r.jsx)("div",{className:"absolute top-8 -right-1",children:(0,r.jsx)(U,{id:e.historyState.id})}),(0,r.jsx)("div",{className:"absolute -top-1 -right-1",children:(0,r.jsx)(R,{id:e.historyState.id})})]})}function B(e){let{ref:n,height:t}=(0,I.Z)(),o=t&&t>64,[a,i]=(0,T.useState)(!1);return(0,r.jsxs)("div",{className:"flex flex-col gap-4",children:[(0,r.jsx)("div",{className:"relative\n      ".concat(e.className||""," ").concat(o?a?"":"overflow-y-clip max-h-12":"","\n      "),children:(0,r.jsx)("div",{ref:n,children:e.children})}),o&&(0,r.jsx)("div",{className:"flex justify-center",children:(0,r.jsx)("button",{className:"text-xs text-gray-500 dark:text-neutral-200 hover:opacity-80 flex flex-row items-center gap-1",onClick:e=>{e.preventDefault(),i(!a)},children:(0,r.jsx)(y.v4,{className:"w-3 h-3 ".concat(a?"rotate-180":"")})})})]})}function q(e){return(0,r.jsx)("div",{...e,className:"relative h-24 w-24 min-w-24\n      hover:shadow-lg\n      ring-1 ring-gray-200/20 dark:ring-neutral-50/10\n      flex-0\n      shadow-md rounded-lg ".concat(e.className||""),children:e.children})}},30675:function(e,n,t){"use strict";t.d(n,{a:function(){return a}});var r=t(54302),o=t(77362);function a(e){let n=(0,r.h)();return(0,o.useQuery)({queryKey:["user",e],queryFn:async()=>{if(!e)throw Error("Username is undefined");let t=await n.users.getUser({params:{username:e}});if(200!==t.status)throw t;return t.body},enabled:!!e})}},17344:function(e,n,t){"use strict";t.d(n,{Ec:function(){return a},Ti:function(){return s},fS:function(){return i}});var r=t(37821),o=t(58078);let a=(0,o.createContext)(null);function i(e){let{user:n,children:t}=e;return(0,r.jsx)(a.Provider,{value:n,children:t})}let s=(0,o.createContext)(null)},56942:function(e,n,t){"use strict";t.d(n,{Lb:function(){return m},Pi:function(){return p},eP:function(){return d},rV:function(){return c}});var r=t(75005),o=t(77362),a=t(87601),i=t(18151),s=t(58078),l=t(17344);function c(){var e;let n=(0,r.$)(),t=(0,s.useContext)(l.Ec);return null!==(e=(0,o.useQuery)({queryKey:["settings"],queryFn:async()=>{let{data:e,error:t}=await n.from("settings").select("model").single();if(t)throw t;return e},enabled:!!t}).data)&&void 0!==e?e:{model:null}}function d(){let e=(0,r.$)(),n=(0,a.useQueryClient)();return(0,i.useMutation)({mutationFn:async n=>{let{data:t,error:r}=await e.from("settings").upsert(n).single();if(r)throw r},onSuccess:()=>{n.invalidateQueries({queryKey:["settings"]})}}).mutateAsync}let u="anthropic_api_key";function p(){return window.localStorage.getItem(u)||void 0}function m(e){window.localStorage.setItem(u,e||"")}},11696:function(e,n,t){"use strict";t.d(n,{l:function(){return a},z:function(){return i}});var r=t(92268),o=t(46587);function a(e){let n=new URL(window.location.href);return e(n),function(e){let n=new URL(e.toString());n.search="";let t=Array.from(e.searchParams.entries()).map(e=>{let[n,t]=e;return"".concat(n,"=").concat(t)}).join("&"),r=n.toString();return t.length>0&&(r+="?"+t),r}(n)}function i(e){return e===o._w||e===r.XN?"/":"/c/".concat(e)}},35238:function(e,n,t){"use strict";t.d(n,{X:function(){return o},t:function(){return a}});var r=t(58078);function o(e){let[,n]=(0,r.useState)({});return(0,r.useEffect)(()=>{let t=t=>{t.detail.key===e&&n({})};return window.addEventListener("session_storage",t),()=>{window.removeEventListener("session_storage",t)}},[e]),window.sessionStorage.getItem(e)}function a(e,n){null===n?window.sessionStorage.removeItem(e):window.sessionStorage.setItem(e,n),window.dispatchEvent(new CustomEvent("session_storage",{detail:{key:e}}))}},73164:function(e,n,t){"use strict";t.d(n,{HV:function(){return i},O9:function(){return c},fk:function(){return s},kL:function(){return l}});var r=t(35238),o=t(84578),a=t.n(o);function i(){return"true"===(0,r.X)("maximize")}function s(){return"true"===window.sessionStorage.getItem("maximize")}function l(e){(0,r.t)("maximize",e.toString())}function c(){let e=i(),n=window!==window.top;return a()()||e||n}},39089:function(e,n,t){"use strict";t.d(n,{$:function(){return c},i:function(){return d}});var r=t(75380),o=t(75005),a=t(87601),i=t(77362),s=t(30675);function l(e){return["site",e,"profile_for_site"]}function c(){let e=(0,a.useQueryClient)();return(n,t)=>{e.setQueryData(l(n),t)}}function d(e){var n,t,a;let c=(0,o.$)(),d=null===(n=(0,i.useQuery)({queryKey:l(e),queryFn:async()=>{var n;let t=await c.from("sites").select("...profile!user_id(username)").eq("id",e).single();if(t.error)throw Error(t.error.message);return{username:null!==(n=t.data.username)&&void 0!==n?n:""}},enabled:!!e&&!(0,r.kM)(e)}).data)||void 0===n?void 0:n.username,u=(0,s.a)(d);return{profile:null===(t=u.data)||void 0===t?void 0:t.user,following:(null===(a=u.data)||void 0===a?void 0:a.followed_at)!==void 0}}},54302:function(e,n,t){"use strict";let r;t.d(n,{h:function(){return et}});var o=t(77452),a=t(58078),i=t(20327),s=t(75005),l=t(17428),c=t(53644),d=t(14581),u=t(22465).lW;function p(e){return Object.fromEntries(new URLSearchParams(function(e){let n=e.length%4;return n&&(e+="=".repeat(4-n)),"function"==typeof atob?atob(e):u.from(e,"base64").toString()}(e)).entries())}function m(e){return function(n,t){try{return e(n)}catch(e){return t.addIssue({code:c.z.ZodIssueCode.custom,message:e instanceof Error?e.message:"Decode failed"}),c.z.NEVER}}}let f=c.z.union([c.z.number().int().min(100).max(102),c.z.number().int().min(300).max(308),c.z.number().int().min(400).max(419),c.z.number().int().min(500).max(511)]),g=c.z.number().int().min(200).max(207);c.z.union([g,f]);let h=/^[a-zA-Z0-9]{17}$/,b=/^([a-zA-Z0-9_]{3,32})$/,v=/^[a-zA-Z0-9-]{3,50}$/,x=c.z.object({message:c.z.string(),code:c.z.string().optional(),cause:c.z.unknown().optional()}).catchall(c.z.unknown()),w=c.z.object({has_next_page:c.z.boolean(),has_previous_page:c.z.boolean(),start_cursor:c.z.string().nullable(),end_cursor:c.z.string().nullable()}),y=e=>{let{min:n=0,max:t=100,cursor:r,extend:o={}}=e;return c.z.object({first:c.z.coerce.number().int().positive().min(n).max(t).optional(),last:c.z.coerce.number().int().positive().min(n).max(t).optional(),before:r.optional(),after:r.optional()}).extend(o).superRefine((e,n)=>{void 0!==e.first&&void 0!==e.last&&n.addIssue({code:c.z.ZodIssueCode.custom,message:"Only one of `first` or `last` can be set"}),void 0!==e.before&&void 0!==e.after&&n.addIssue({code:c.z.ZodIssueCode.custom,message:"Only one of `before` or `after` can be set"}),void 0!==e.first&&void 0!==e.before&&n.addIssue({code:c.z.ZodIssueCode.custom,message:"`first` and `before` cannot be used together"}),void 0!==e.last&&void 0!==e.after&&n.addIssue({code:c.z.ZodIssueCode.custom,message:"`last` and `after` cannot be used together"})})},k=c.z.object({}).and(c.z.discriminatedUnion("type",[c.z.object({type:c.z.literal("get"),url:c.z.string()}),c.z.object({type:c.z.literal("post"),url:c.z.string(),body:c.z.record(c.z.string())}),c.z.object({type:c.z.literal("eval"),code:c.z.string()}),c.z.object({type:c.z.literal("continue")}),c.z.object({type:c.z.literal("edit"),text:c.z.string()})])),z=c.z.object({id:c.z.string().uuid(),username:c.z.string().regex(b).nullable(),avatar_url:c.z.string().url().nullable(),description:c.z.string().nullable(),twitter:c.z.string().nullable(),discord:c.z.string().nullable()}),j=c.z.object({username:c.z.string().regex(b),description:c.z.string().nullable(),twitter:c.z.string().nullable(),discord:c.z.string().nullable()}),_=c.z.object({model:c.z.string().nullable()}),C=c.z.enum(["public","unlisted","private"]),T=c.z.object({id:c.z.string().regex(h),parent_id:c.z.string().regex(h).nullable(),created_at:c.z.string().datetime({offset:!0}),state:c.z.enum(["initial","generating","done","failed"]),owner:z,model:c.z.string().nullable(),lore:d.ee.nullable(),title:c.z.string().nullable(),url:c.z.string().nullable(),prompt:k.nullable(),html:c.z.string().optional()});c.z.object({data:c.z.array(c.z.object({site:T,cursor:c.z.string()})),meta:w});let I=c.z.object({parent_id:c.z.string().regex(h).nullable(),prompt:k,model:c.z.string(),lore:d.ee,apiKey:c.z.string().nullable()});c.z.object({created_at:c.z.string().datetime({offset:!0}),site:c.z.string().regex(h),user:c.z.string().regex(h)});let E=c.z.object({id:c.z.string().regex(h),title:c.z.string(),created_at:c.z.string().datetime({offset:!0}),slug:c.z.string().regex(v).nullable(),visibility:C,owner:z,site_id:c.z.string().regex(h).nullable()}),P=c.z.object({cursor:c.z.string(),bookmark:E,site:T}),S=c.z.object({data:c.z.array(P),meta:w}),N=y({cursor:c.z.string().transform(m(p)).pipe(c.z.object({id:c.z.string().regex(h),at:c.z.string().datetime({offset:!0})}))}),A=c.z.object({title:c.z.string(),site_id:c.z.string().regex(h),slug:c.z.string().regex(v).nullish()}),D=c.z.object({site:T,bookmark:E.nullable(),views:c.z.number().int().positive(),likes:c.z.number().int().positive()}),L=c.z.object({cursor:c.z.string(),item:D}),F=c.z.object({data:c.z.array(L),meta:w}),U=y({cursor:c.z.string().transform(m(p)).pipe(c.z.object({id:c.z.string().regex(h),rank:c.z.string().pipe(c.z.coerce.number().int().positive())})),extend:{range:c.z.enum(["day","week","month","all"]).optional().default("day")}}),M=c.z.object({created_at:c.z.string().datetime({offset:!0}),user:z}),R=c.z.object({cursor:c.z.string(),follow:M}),G=c.z.object({data:c.z.array(R),meta:w.extend({count:c.z.number().int().positive()})}),B=y({cursor:c.z.string().transform(m(p)).pipe(c.z.object({id:c.z.string().regex(h),to:c.z.string().regex(h),at:c.z.string().datetime({offset:!0})}))}),q=(0,l.vR)(),O=q.router({setCurrentUserAvatar:{method:"PUT",path:"/user/avatar",contentType:"multipart/form-data",body:q.type(),responses:{200:c.z.object({user:z})},metadata:{openapi:{requestBody:{content:{"multipart/form-data":{schema:{type:"object",properties:{avatar:{type:"string",format:"binary"}},required:["avatar"]},encoding:{avatar:{contentType:"image/jpeg, image/png, image/webp"}}}}},security:[{bearerAuth:[]}]}}}},{commonResponses:{default:c.z.object({error:x})}}),W=(0,l.vR)(),Z=W.router({getBookmarkBySlug:{description:"Get a bookmark by username and slug",method:"GET",path:"/bookmarks/@:username/:slug",pathParams:c.z.object({username:c.z.string().regex(b),slug:c.z.string().regex(v)}),responses:{200:c.z.object({bookmark:E,site:T})}},getBookmark:{description:"Get a bookmark by ID",method:"GET",path:"/bookmarks/:bookmark_id",pathParams:c.z.object({bookmark_id:c.z.string().regex(h)}),responses:{200:c.z.object({bookmark:E,site:T})}},createBookmark:{description:"Create a new bookmark",method:"POST",path:"/bookmarks",body:A,responses:{200:c.z.object({bookmark:E,site:T})},metadata:{openapi:{security:[{bearerAuth:[]}]}}},updateBookmark:{description:"Update a bookmark by ID",method:"PATCH",path:"/bookmarks/:bookmark_id",pathParams:c.z.object({bookmark_id:c.z.string().regex(h)}),body:A.partial(),responses:{200:c.z.object({bookmark:E,site:T})},metadata:{openapi:{security:[{bearerAuth:[]}]}}},deleteBookmark:{description:"Delete a bookmark by ID",method:"DELETE",path:"/bookmarks/:bookmark_id",pathParams:c.z.object({bookmark_id:c.z.string().regex(h)}),body:W.noBody(),responses:{204:W.noBody()},metadata:{openapi:{security:[{bearerAuth:[]}]}}},getCurrentUserBookmarks:{description:"Get latest bookmarks for the current user",method:"GET",path:"/user/bookmarks",query:N,responses:{200:c.z.object({data:c.z.array(c.z.object({bookmark:E,site:T,cursor:c.z.string()})),meta:w})},metadata:{openapi:{security:[{bearerAuth:[]}]}}},getUserBookmarks:{description:"Get latest bookmarks for a user by username",method:"GET",path:"/users/@:username/bookmarks",pathParams:c.z.object({username:c.z.string().regex(b)}),query:N,responses:{200:c.z.object({bookmarks:S})}},getBookmarks:{description:"Get latest public bookmarks",method:"GET",path:"/bookmarks",query:N,responses:{200:c.z.object({bookmarks:S})}}},{commonResponses:{default:c.z.object({error:x})}}),Y=(0,l.vR)().router({getTrendingFeed:{method:"GET",path:"/feed/trending",query:U,responses:{200:c.z.object({feed:F})}},getTopFeed:{method:"GET",path:"/feed/top",query:U,responses:{200:c.z.object({feed:F})}},getNewFeed:{method:"GET",path:"/feed/new",query:U,responses:{200:c.z.object({feed:F})}},getFollowingFeed:{method:"GET",path:"/feed/following",query:U,responses:{200:c.z.object({feed:F})},metadata:{openapi:{security:[{bearerAuth:[]}]}}}},{commonResponses:{default:c.z.object({error:x})}}),Q=(0,l.vR)(),$=Q.router({followUser:{method:"POST",path:"/users/@:username/follow",pathParams:c.z.object({username:c.z.string().regex(b)}),body:Q.noBody(),responses:{200:c.z.object({follow:M})},metadata:{openapi:{security:[{bearerAuth:[]}]}}},unfollowUser:{method:"DELETE",path:"/users/@:username/follow",pathParams:c.z.object({username:c.z.string().regex(b)}),body:Q.noBody(),responses:{204:Q.noBody()},metadata:{openapi:{security:[{bearerAuth:[]}]}}},getUserFollowing:{method:"GET",path:"/users/@:username/following",pathParams:c.z.object({username:c.z.string().regex(b)}),query:B,responses:{200:c.z.object({following:G})}},getUserFollowers:{method:"GET",path:"/users/@:username/followers",pathParams:c.z.object({username:c.z.string().regex(b)}),query:B,responses:{200:c.z.object({followers:G})}},getCurrentUserFollowing:{method:"GET",path:"/user/following",query:B,responses:{200:c.z.object({following:G})},metadata:{openapi:{security:[{bearerAuth:[]}]}}},getCurrentUserFollowers:{method:"GET",path:"/user/followers",query:B,responses:{200:c.z.object({followers:G})},metadata:{openapi:{security:[{bearerAuth:[]}]}}}},{commonResponses:{default:c.z.object({error:x})}}),X=(0,l.vR)(),H=X.router({getSiteHtmlById:{method:"GET",path:"/sites/:site_id/html",pathParams:c.z.object({site_id:c.z.string().regex(h)}),query:c.z.object({raw:c.z.boolean().optional()}),responses:{200:X.otherResponse({contentType:"text/html",body:X.type()})}},getSiteHtmlBySlug:{method:"GET",path:"/sites/@:username/:slug/html",pathParams:c.z.object({username:c.z.string().regex(b),slug:c.z.string().regex(v)}),query:c.z.object({raw:c.z.boolean().optional()}),responses:{200:X.otherResponse({contentType:"text/html",body:X.type()})}}},{commonResponses:{default:X.otherResponse({contentType:"text/html",body:X.type()})}}),V=(0,l.vR)().router({getCurrrentUserSettings:{method:"GET",path:"/user/settings",responses:{200:c.z.object({settings:_})},metadata:{openapi:{security:[{bearerAuth:[]}]}}},updateCurrentUserSettings:{method:"PATCH",path:"/user/settings",body:_.partial(),responses:{200:c.z.object({settings:_})},metadata:{openapi:{security:[{bearerAuth:[]}]}}}},{commonResponses:{default:c.z.object({error:x})}}),K=(0,l.vR)().router({getSite:{method:"GET",path:"/sites/:site_id",pathParams:c.z.object({site_id:c.z.string().regex(h)}),responses:{200:c.z.object({site:T})}},getSiteBySlug:{method:"GET",path:"/sites/@:username/:slug",pathParams:c.z.object({username:c.z.string().regex(b),slug:c.z.string().regex(v)}),query:c.z.object({include:c.z.array(c.z.enum(["session"])).optional()}),responses:{200:c.z.object({site:T})}},createSite:{method:"POST",path:"/sites",body:I,responses:{200:c.z.object({site:T})},metadata:{openapi:{security:[{bearerAuth:[]}]}}}},{commonResponses:{default:c.z.object({error:x})}}),J=(0,l.vR)().router({getCurrentUser:{method:"GET",path:"/user",responses:{200:c.z.object({user:z})},metadata:{openapi:{security:[{bearerAuth:[]}]}}},updateCurrentUser:{method:"PATCH",path:"/user",body:j.partial(),responses:{200:c.z.object({user:z})},metadata:{openapi:{security:[{bearerAuth:[]}]}}},getUser:{method:"GET",path:"/users/@:username",pathParams:c.z.object({username:c.z.string().regex(b)}),responses:{200:c.z.object({user:z,followed_at:c.z.string().datetime({offset:!0}).optional()})}}},{commonResponses:{default:c.z.object({error:x})}}),ee=(0,l.vR)().router({avatar:O,bookmarks:Z,feed:Y,follows:$,html:H,sites:K,settings:V,users:J}),en=(e,n)=>(0,l.Ef)(ee,{baseUrl:"".concat(e,"/api/v1"),async api(e){let t=await n.getSession();return t.data.session&&(e={...e,headers:{...e.headers,Authorization:"Bearer ".concat(t.data.session.access_token)}}),await (0,l.I8)(e)}}),et=()=>{let e=(0,a.useContext)(o.tT),n=(0,a.useContext)(o.o2);return r||(r=en((0,i.$8)({cfPagesBranch:e,cfPagesCommitSha:n}),(0,s.e)().auth)),r}},20327:function(e,n,t){"use strict";t.d(n,{$8:function(){return a},SX:function(){return i}});var r=t(22672);function o(e){var n;return"main"===e.cfPagesBranch?"party.websim.ai":"".concat(null===(n=e.cfPagesCommitSha)||void 0===n?void 0:n.slice(0,7),".party.websim.ai")}function a(e){let n=o(e);return"".concat(n.startsWith("localhost")?"http":"https","://").concat(n)}function i(e,n){let t=o(e);return new r.pl({...n,host:t,async query(){var n;return{token:null===(n=(await e.supabase.auth.getSession()).data.session)||void 0===n?void 0:n.access_token}}})}},80997:function(e,n,t){"use strict";t.d(n,{W:function(){return o}});let r=[{regex:/^\/$/,fn:()=>({type:"home"})},{regex:/^\/@([a-zA-Z0-9_]{3,32})$/,fn:e=>({type:"profile",username:e[1]})},{regex:/^\/c\/([a-zA-Z0-9]{17})$/,fn:e=>({type:"site",siteId:e[1]})},{regex:/^\/@([a-zA-Z0-9_]{3,32})\/(.+)$/,fn:e=>({type:"bookmark",username:e[1],slug:e[2]})}];function o(e){for(let{regex:n,fn:t}of r){let r=e.match(n);if(r)return t(r)}return null}},75005:function(e,n,t){"use strict";t.d(n,{e:function(){return s},$:function(){return i}});var r=t(91510),o=t(58078);let a=null;function i(){return(0,o.useMemo)(()=>(a||(a=s()),a),[])}function s(){return(0,r.AY)("https://hello.websim.ai","eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6Im9jamVmZ2NqamlxeWt3YWR2dnJkIiwicm9sZSI6ImFub24iLCJpYXQiOjE3MTE4MzI5OTMsImV4cCI6MjAyNzQwODk5M30.vsreOYwk8pKsr8NFlzpIzWAiD-vXj6ijv_Bhn1vYtHs")}},10173:function(){},99578:function(){}}]);